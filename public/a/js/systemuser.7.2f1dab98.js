webpackJsonp([7],{1061:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.column=void 0;var r=a(0),l=n(r),o=a(20),u=n(o),s=t.column=[{title:"编号",dataIndex:"userNo",key:"userNo"},{title:"用户名",dataIndex:"userName",key:"userName"},{title:"姓名",dataIndex:"name",key:"name"},{title:"备注",dataIndex:"remark",key:"remark",render:function(e){var t=e.remark;return l.default.createElement("div",null,l.default.createElement("span",null,t||"--"))}},{title:"创建时间",key:"createtime",render:function(e){var t=e.createTime;return l.default.createElement("div",null,l.default.createElement("span",null,t?(0,u.default)(t).format("YYYY-MM-DD HH:mm:ss"):""))}},{title:"状态",dataIndex:"status",key:"status",render:function(e){var t=e.status;return l.default.createElement("div",null,t?l.default.createElement("span",{className:"released"},"正常"):l.default.createElement("span",{className:"disable"},"已禁用"))}}];!function(){"undefined"!=typeof __REACT_HOT_LOADER__&&__REACT_HOT_LOADER__.register(s,"column","/Users/zhaoguoping/work/integrationPay_web/backstage/src/app/system/system-user/const.js")}()},1062:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,a){function n(r,l){try{var o=t[r](l),u=o.value}catch(e){return void a(e)}if(!o.done)return Promise.resolve(u).then(function(e){n("next",e)},function(e){n("throw",e)});e(u)}return n("next")})}}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=a(941),i=n(s),c=a(236),d=n(c),f=a(939),m=n(f),p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},h=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();a(942),a(113),a(940);var y=a(0),_=n(y),v=a(390),b=n(v),E=a(238),g=n(E),w=a(132),O=a(34),C=function(e){function t(){return l(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u(t,e),h(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.visible,n=t.title,l=t.type,o=t.data,u=t.form,s=t.onClose,c=t.search;return _.default.createElement(i.default,{visible:a,title:n,wrapClassName:"add-edit-system-user",onOk:function(){u.validateFields(function(e,t){e||("add"===l?(0,w.addUser)(t).then(function(e){e.eCode?m.default.success("操作失败"):(m.default.success("操作成功"),c(),s(),u.resetFields())}):(t=(0,O.del)(t,"userName"),(0,w.editUser)(p({id:o.id},t)).then(function(e){e.eCode?m.default.success("操作失败"):(m.default.success("操作成功"),c(),s(),u.resetFields())})))})},onCancel:function(){s(),u.resetFields()}},_.default.createElement(b.default,null,"add"===l?_.default.createElement(g.default,{label:"用户名"},u.getFieldDecorator("userName",{rules:[{rule:"require",message:"请输入用户名"},{rule:/^[0-9a-zA-Z]{6,20}$/g,message:"仅支持6~20位字母、数字及其组合"},function(){var t=r(regeneratorRuntime.mark(function t(a){var n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!a){e.next=10;break}return e.next=3,(0,w.userNameNorepeat)(a);case 3:if(n=e.sent,!(r=n.eCode)){e.next=9;break}return e.abrupt("return",{message:"已存在此用户名"});case 9:return e.abrupt("return",null);case 10:case"end":return e.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}()]})(_.default.createElement(d.default,{placeholder:"仅支持字母、数字及其组合"}))):_.default.createElement("div",{className:"divSame"},_.default.createElement("span",{className:"labelSame"},"用户名"),_.default.createElement("span",{className:"inputSame"},o.userName)),_.default.createElement(g.default,{label:"姓名"},u.getFieldDecorator("name",{rules:[{rule:"require",message:"请输入姓名"},{rule:/^\S{0,30}$/,message:"最多30个的非空字符！"}]})(_.default.createElement(d.default,null))),_.default.createElement(g.default,{label:"备注"},u.getFieldDecorator("remark",{rules:[function(e){return e?/(^undefined$|^\S{0,50}$)/.test(e)?null:{message:"最多50个的非空字符！"}:null}]})(_.default.createElement(d.default,null)))))}}]),t}(y.PureComponent);t.default=C;!function(){"undefined"!=typeof __REACT_HOT_LOADER__&&__REACT_HOT_LOADER__.register(C,"AddEditSystemUser","/Users/zhaoguoping/work/integrationPay_web/backstage/src/app/system/system-user/components/add-edit.js")}()},1063:function(e,t){},971:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s,i,c,d=a(941),f=n(d),m=a(939),p=n(m),h=a(943),y=n(h),_=a(236),v=n(_),b=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();a(942),a(940),a(944),a(113);var E=a(0),g=n(E),w=a(111),O=a(112),C=a(978),S=n(C),k=a(1005),M=n(k),N=a(983),R=n(N),P=a(980),x=n(P),T=a(979),j=n(T),A=a(34),U=a(390),z=a(400),D=a(1061),H=a(132),q=a(1062),F=n(q);a(1063);var I=(s=(0,w.connect)(function(e){return{list:e.systemUser.data}},function(e){return(0,O.bindActionCreators)({page:z.page},e)}),i=(0,U.create)({globalMaxError:1,globalErrorStop:!0}),s(c=i(c=function(e){function t(){var e,a,n,r;l(this,t);for(var u=arguments.length,s=Array(u),i=0;i<u;i++)s[i]=arguments[i];return a=n=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(s))),n.state={addModal:!1,editModal:!1,initPwdModal:!1,statusUserModal:!1,delModal:!1,selectRow:{},query:{page:0,pageSize:10,condition:""},visible:!1,x:0,y:0,currentChoose:{operate:[]},onload:!1},n.search=function(){var e;return(e=n).__search__REACT_HOT_LOADER__.apply(e,arguments)},n.columns=D.column.concat({title:"操作",key:"caozuo",render:function(e){return g.default.createElement("div",{className:"more-box"},g.default.createElement("span",{className:"icon icon-gengduo",onClick:function(t){var a=t.target,r=a.getBoundingClientRect(),l=r.left,o=r.top,u=r.width,s={operate:["编辑","权限管理","初始化密码",e.status?"禁用":"恢复","删除"],data:e};n.setState({x:l+u/2,y:o,currentChoose:s,visible:!0})}}))}}),r=a,o(n,r)}return u(t,e),b(t,[{key:"__search__REACT_HOT_LOADER__",value:function(){this.setState({onload:!1}),this.props.page(this.state.query)}},{key:"render",value:function(){var e=this,t=this.state,a=t.selectRow,n=t.query,l=t.addModal,o=t.editModal,u=t.currentChoose,s=t.initPwdModal,i=t.statusUserModal,c=t.delModal,d=t.onload,m=this.props,h=m.list,_=m.form,b=m.match;return g.default.createElement("div",{className:"system-user"},g.default.createElement(S.default,null,g.default.createElement("span",{className:"mainColor"},"系统管理 / "),g.default.createElement("span",null,"用户管理")),g.default.createElement("div",{className:"add-header"},g.default.createElement("div",null,g.default.createElement(M.default,{text:"新增账号",onClick:function(){e.setState({addModal:!0})}})),g.default.createElement("div",{className:"search-box"},g.default.createElement("div",null,g.default.createElement(v.default,{placeholder:"用户名，姓名搜索",onChange:function(t){e.setState({query:(0,A.write)(n,"condition",t.target.value)})}}),g.default.createElement("div",{onClick:function(){e.setState({query:(0,A.write)(n,"page",0)},function(){e.search()})}},"搜 索")))),d?g.default.createElement("div",{className:"table"},g.default.createElement(R.default,{serial:!0,selectRow:a,dataSource:h.content,column:this.columns,onClick:function(t){var n=t.data,l=t.index;a[l]?e.setState({selectRow:{}}):e.setState({selectRow:r({},l,n)})}}),g.default.createElement(j.default,{showSizeChange:!0,selectSizeFormat:"每页{}条",showJump:!0,showTotal:!0,showtotalElements:!0,total:h.totalPages,elements:h.totalElements,current:n.page+1,pageSize:n.pageSize,onChange:function(t,a){e.setState({query:(0,A.write)(n,["page","pageSize"],{page:t-1,pageSize:a})},function(){return e.search()})},sizeAry:[5,10,20,50]}),g.default.createElement(x.default,{x:this.state.x-46,y:this.state.y+20,visible:this.state.visible,menus:u.operate,width:100,itemClick:function(t){var a=t.menu;if("编辑"===a&&(e.props.form.setFields(u.data),e.setState({editModal:!0})),"初始化密码"===a&&e.setState({initPwdModal:!0}),"禁用"!==a&&"恢复"!==a||e.setState({statusUserModal:!0}),"删除"===a&&e.setState({delModal:!0}),"权限管理"===a){var n=b.url+"/power/"+u.data.id+"/"+encodeURI(u.data.name)+"/"+encodeURI(u.data.userName)+"/"+encodeURI(u.data.remark);location.hash=n}},onCancel:function(){e.setState({visible:!1})}})):g.default.createElement("div",{className:"spin-box"},g.default.createElement(y.default,{tip:"加载中...",size:"large",spinning:!0})),l&&g.default.createElement(F.default,{title:"新增账号",type:"add",visible:l,form:_,onClose:function(){e.setState({addModal:!1})},search:function(){return e.setState({query:(0,A.write)(n,"page",0)},function(){return e.search()})}}),o&&g.default.createElement(F.default,{title:"编辑账号",type:"edit",visible:o,data:u.data,form:_,onClose:function(){e.setState({editModal:!1})},search:function(){return e.search()}}),s&&g.default.createElement(f.default,{title:"初始化密码",width:400,visible:s,onOk:function(){(0,H.initPassword)(u.data.id).then(function(t){t.eCode?p.default.error("操作失败"):(p.default.success("操作成功"),e.setState({initPwdModal:!1},function(){return e.search()}))})},onCancel:function(){e.setState({initPwdModal:!1})}},g.default.createElement("div",{className:"warn-content"},g.default.createElement("p",null,"是否初始化用户",u.data.userName,"的密码"))),i&&g.default.createElement(f.default,{title:(u.data.status?"禁用":"恢复")+"用户",width:400,visible:i,onOk:function(){(0,H.statusUser)(u.data.id).then(function(t){t.eCode?p.default.error("操作失败"):(p.default.success("操作成功"),e.setState({statusUserModal:!1},function(){return e.search()}))})},onCancel:function(){e.setState({statusUserModal:!1})}},g.default.createElement("div",{className:"warn-content"},g.default.createElement("p",null,"是否",u.data.status?"禁用":"恢复","用户",u.data.userName))),c&&g.default.createElement(f.default,{title:"删除用户",width:400,visible:c,onOk:function(){(0,H.deleteUser)(u.data.id).then(function(t){t.eCode?p.default.error("操作失败"):(p.default.success("操作成功"),e.setState({delModal:!1},function(){return e.search()}))})},onCancel:function(){e.setState({delModal:!1})}},g.default.createElement("div",{className:"warn-content"},g.default.createElement("p",null,"是否删除用户",u.data.userName))))}},{key:"componentWillReceiveProps",value:function(e){e.list!==this.props.list&&this.setState({onload:!0})}},{key:"componentDidMount",value:function(){this.search()}}]),t}(E.PureComponent))||c)||c);t.default=I;!function(){"undefined"!=typeof __REACT_HOT_LOADER__&&__REACT_HOT_LOADER__.register(I,"SystemUser","/Users/zhaoguoping/work/integrationPay_web/backstage/src/app/system/system-user/index.js")}()}});